#:schema https://jj-vcs.github.io/jj/latest/config-schema.json

[user]
name = "Andrew Hampton"
email = "andrewwh@gmail.com"

[ui]
# default-command = ["log", "-r", "(heads(::trunk() & ::@):: & ::trunk()) | (heads(::trunk() & ::@):: & ::@) | @::"]
default-command = ["log", "-r", "(heads(::@ & ::trunk()))::(@ | trunk()) | (trunk()..@)::"]
pager = ":builtin"
conflict-marker-style = "snapshot"

[colors]
"diff removed token" = { underline = false }
"diff added token" = { underline = false }

[ui.streampager]
interface = "quit-if-one-page"  # same behavior as less -FRX

[templates]
draft_commit_description = '''
concat(
  coalesce(description, default_commit_description, "\n"),
  surround(
    "\nJJ: This commit contains the following changes:\n", "",
    indent("JJ:     ", diff.summary()),
  ),
  surround(
    "\nJJ: This commit contains the following changes:\n", "",
    indent("JJ:     ", diff.stat(72)),
  ),
  "\n",
  "JJ: ignore-rest\n",
  diff.git(),
)
'''

# [template-aliases]
# "format_timestamp(timestamp)" = "format_timestamp(timestamp, \"%Y-%m-%d %H:%M:%S %z\")"

[signing]
behavior = "own"
backend  = "ssh"
key      = "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIBoKM9nM2uJb/qELkBVg8btd5/v/dn5tLFlLIjKKV8Nt"
backends.ssh.program = "/Applications/1Password.app/Contents/MacOS/op-ssh-sign"

[revsets]
# Try to keep the change ID short for my recent commits and the current branch commits
# short-prefixes = '(mine() & committer_date(after:"1 day ago")) | (main::@) | @::'
short-prefixes = 'heads(::main & ::@)::'
